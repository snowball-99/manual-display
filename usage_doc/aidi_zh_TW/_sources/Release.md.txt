# 版本更新說明

## 3.3.0版本更新
### 演算法升級
1）偵測演算法新增複雜網絡

2）新增幾何匹配工具（Beta）

3）新增EL非監督分割工具（Beta）

4）所有AI演算法工具支援50系列顯示卡

### 軟體升級
1）新增智慧標註工具

2）新增區域建模工具，解決小批量多品種檢測問題

3）視圖支援模糊匹配：視圖同名添加後綴過濾支援模糊匹配

4）任意模組中匯出資料包時均可選擇輸入工具的視圖

5）混合圖工程支援指定子圖進行訓練推理

6）增加回饋訊息工具：一鍵產生回饋訊息，方便分析現場問題

### 優化及易用性提升
1）優化萬圖以上工程操作不卡頓

2）區域計算、綜合判定工具所連接的工具可修改重連

3）優化多螢幕不同尺寸顯示效果

4）優化顯示卡配置資訊為用戶相關,各用戶配置獨立

5）影像清單中視圖依原圖中位置順序顯示

6）工廠模式下支援可修改推理參數

7）影像顯示區縮小後顯示的缺陷標記點顏色：綠點為標註、紅點為推理結果

8）支援直接開啟指定路徑工程及雙擊直接開啟單一工程

9）所有匯出到資料夾的內容，不再要求為空資料夾，同名檔案使用者可選擇覆蓋

10）修復BUG若干

## 3.2.2版本更新
### 軟體升級
1）更新演算法庫

## 3.2.1版本更新
### 軟體升級

1）視圖轉換器新增按統一尺寸切分

2）優化2K\4K螢幕下的顯示問題

3）其他優化若干

## 3.2.0版本更新
### 二次開發升級
1）支援根據可選規則匯出調用的二次開發範例專案或範例程式

2）新增版本切換工具

3）新增環境監控工具

4）優化介面- C++補充編碼轉換介面、解決一個Sample重複推理出錯問題

5）優化介面- 補充和完善影像格式轉換介面

6）優化介面- C#異常能夠區分類型

7）優化介面- C#支援自定義日誌接收對象

8）C#開發框架最低可支援net framework4.5



### 軟體升級
1）視圖轉換器支援Python腳本

2）新增區域計算工具

3）綜合判定工具升級
　&ensp; 綜合判定結果可輸出綜合結果（單一結果），和詳細算法結果
　&ensp; 重構腳本編輯器

4）新增版本轉化工具

5）優化標註保存速度、加載專案速度

6）視圖重新應用，標註保存邏輯優化

7）支援多人協同訓練同一專案的不同分支

### 算法升級
1）CPU推理效能升級

2）優化OCR推理耗時新增問題



## 3.1.3版本更新
修復bug若干

## 3.1.2版本更新
修復bug若干

上調模組面積過濾默認最大值

## 3.1.1版本更新
修復若干崩潰問題

修復部分顯示異常問題

修復導入協力廠商標註，概率卡死問題

## 3.1.0版本更新
### 算法升級
一級：

檢測：新增高精度模式

OCR：新增字元校正、模板校正

分割：新增高精度模型

所有模組：提升推理速度

二級：

非監督分割：檢測精度提升至5*5

分割、分類：新增按照數據集類型執行訓練推薦

多卡訓練效率提升

所有模組支援CPU訓練推理

優化分類、非監督分類顯存佔用

三級：

所有模組優化第一張圖片的推理速度較慢的問題

所有模組優化了標註越多訓練啟動越慢問題

修復分割增量訓練崩潰的問題

修復分割分割樣本推薦推薦效果差的問題

優化分割複雜資料及標註過多時的訓練速度

修復非監督分割多卡比單卡慢的問題

修復非監督分割邊緣過檢的問題

新增OCR字元極性設定，重點優化黑底白字場景的OCR檢出效果

新增OCR單字元匹配字串功能

綜合判定工具下，分割、非監督分割模組新增通過“相對灰度”“圓度”判定

### 重點軟體升級：
一級：

支援標註導入匯出

保存標註的速度巨幅提升

綜合判定節點支援推理結果渲染

新增專案清理（體積可大幅縮減）

AQCloud適配完成

二級：

常規模式支援一鍵全部推理

工廠模式支援單分支推理

綜合判定節點：“其他”類別支援重命名

新增魔棒孔洞填充功能

訓練資訊顯示自我調整精度值

三級：

Tag支援快速刪除

綜合名額支援點擊跳轉

工廠模式影像清單新增重置功能

切換模組自動記錄清單位置

算法模組主介面新增影像Tag管理功能

工廠模式新增分類、非監督分類推理結果圖元

兩點畫圓工具優化

標註支援腐蝕膨脹

綜合判定節點：新增判定函數管理，支援自定義預製函數

綜合判定節點條件連接默認為或

新增&優化預警資訊、引導資訊及提示若干

優化顯示若干：樹狀圖、座標值、混淆矩陣、快速鍵資訊、報表

優化交互若干：彈窗支援enter、標註類型切換新增快速鍵、影像清單拉伸時自動填充列數

專案管理新增手動刷新功能

OCR模組混淆矩陣隱藏全0行列

新增模組名稱自動匹配語言設定

### 二次開發升級：
C++支援VS2013以上編譯器版本

C++支援debug模式運行

二次開發支援C語言

二次開發支援非同步推理

新增Labview二次開發工具包

## 3.0.2版本更新
顯卡驅動安裝連結適應系統語言

新增英文版本的使用檔案、開發檔案

## 3.0.1版本更新
支援切換繁體，支援繁體作業系統

修復綜合判定工具連接問題

## 3.0.0版本更新
### 重點演算法優化
分割支援增量訓練-提高模型反覆運算過程中的訓練速度

定位-單點標註，所需樣本量減少，訓練參數自我調整，提升易用性

非監督分類升級-訓練速度大幅提升

### 其他算法升級
分割穩定性提升

非監督分割推理顯存優化

分類模組低精度場景，推理速度提升50%

裝配檢測支援多尺度目標

裝配檢測支援角度預測

### 重點軟體功能升級
支援樹狀流程圖：模組串並聯

支援全模組工廠模式升級

新增綜合判定節點：用於匯總各模組結果，並給出最終分類

各模組標註、測試結果存儲在原圖，不隨前序模組變化而消失

影像清單單列多列顯示無縫切換，支援且/或/非的篩選條件

新增自動掩膜，可將前序模組結果自動轉化為掩膜

### 其他軟體功能升級
專案管理升級

專案新增版本管理

UI全新升級

全模組名額評估升級

模組重組：快速檢測和檢測模組合併，裝配檢查+佈局模板從定位中折開

專案使用時減少資源佔用

標註工具升級：OCR多行快速標註、定位/裝配快速標註、分割/非監督分割ROI魔棒

數據劃分支援類間均衡

推理結果自動去重

非監督分割得分分佈圖優化

自動分配可用GPU進行訓練推理

耗時統計新增最大值

### 二次開發升級
可直接返回推理結果類

提供直接的參數類修改介面

提供的幾何函式庫即可直接計算，用於計算缺陷面積等特徵

可靈活獲取任一工具的中間結果

## 2.4.5版本更新
### 軟體優化：
標籤、模組名稱、模板名稱、Tag支援輸入空格

AIDI安裝過程在非簡體/繁體/英文的系統語言下顯示為英文

### 修復：
4*8位bmp圖，無法導入bmp類型專案

2.4.4匯出尾碼為.png而實際尾碼為.jpg圖片

區域選取-無法導入jpg圖片

報表按照Tag篩選後，下一張切換錯誤

## 2.4.4版本更新
### 演算法優化：
分割模組：

優化推理速度

修復含重點學習區域時訓練小概率崩潰問題

檢測模組：

修復小目標CPU推理時崩潰問題

定位模組：

優化自動設定最大邊長時顯存佔用過高的問題

優化樣本量較少時訓練效果不佳的問題

OCR模組：

修復通用模型推理批次大於1時崩潰的問題

所有模組單卡訓練速度小幅度提升

修復當用戶設定推理時GPU數量為0時仍提示GPU資源不足的問題

修復無GPU或驅動錯誤時啟動崩潰問題，現時無GPU或驅動錯誤時自動使用CPU

修復圖像數量很多時訓練越來越慢的問題

修復顯卡小工具顯存計算不準確問題

### 軟體優化：
工廠模式可以篩選推理類別：圖像列表新增了篩選項“預測類別”

工廠模式開放推理批次參數設置，推理可加速

支援工廠模式渲染圖匯出

工廠模式新增標註管理

重複圖像可以選擇：替換、跳過、重複添加

支援快速鍵設定Tag

優化Tag設定速度

導圖速度提升

刪除後處理之前的結果顯示

相容模式下-推理方式優化為增量推理

支援Labelme多標籤標註導入；檢測模組支援導入Labelme標註檔案

圖像最大邊長限制為3W

標註懸浮資訊-恢復在編輯模式下顯示

刪除後序模組警告資訊提示

標註篩選支援鍵盤上下鍵切換

軟體安裝目錄下集成：依賴函式庫複製&檢查工具

### 修復：
修復AIDI遠端傳圖功能：當打開遠程目錄下的專案時，加圖時均提示目標磁碟不足2G

修復本地創建專案，前序模組更新後，然後專案放到cloud訓練，出現驚嘆號

修復大數據量專案切圖很卡的問題

修復全新筆記型電腦（無顯卡)首次推理時，報CUDA錯誤

修復最小化AIDI軟體，電腦工作列點擊關閉軟體，卡住不動

修復無GPU機器 ,首次快速啟動推理時，提示CUDA錯誤

修復專案中存在區域選取、工廠模式時，打開一次db中params就會新增一條記錄

修復標籤名稱為中文時，測試檔案 test.json中亂碼

修復分割剪切時小概率崩潰問題

修復分割和非監督分割模組，撤回錯誤問題

修復打開最近的專案時，若專案為遠程共享目錄中的專案則無法打開

### 二次開發：
優化：
新增支援記憶體不連續圖像的0記憶體複製轉換介面

AidiRunner高級介面load_factory_model、load_project_model新增兩個參數：指定GPU編號、推理模式

runner 提供面向指針的高級介面（C# IntPtr， C/C++ void * ）

移除AidiRunner add_images和wait_get_result介面

新增C#二次開發LabelIO to_json()介面支援直接輸出中文標籤

新增edit_test_json介面支援string類型

### 修復：
修復load_factory_model不支援multi_thread問題

修復cppabi檔內容錯誤

修復VS2017之前的編譯器編譯C++時出錯問題

二次開發檔案&範例程式
新增補充二次開發檔案和範例程式中的runner範例

修復範例程式中的錯誤代碼

修復提供的協力廠商開發函式庫無法使用問題，提供了全新版本的協力廠商開發函式庫

## 2.4.3版本更新
### 優化：
1）軟體優化：

報表顯示OCR和定位模板的匹配結果

1）演算法優化：

新增中文簡體、中文繁體、英文語言切換功能，支援各語言作業系統打開各語言專案，（專案名和專案路徑需保持和系統語言一致）

支援GeForce RTX40系列顯卡

aidi::Image新增直接操作圖像記憶體的介面，使用該介面記憶體要求開發者自行管理

非監督分割演算法優化訓練穩定性，提升算法對背景亮度的適應性

開放分割模組模型架構參數到高級參數中

### 修復：
1）軟體修復：

測試開始後刪除模組，軟體卡在正在載入中

在大圖像上編輯時，很難在地圖上看到後期處理設定（例如，邊長約為30000px）

OCR，繪製標註時刪除標籤，軟體崩潰

分類模組過濾參數勾選，點擊顯示高級參數後重繪參數列表變為過濾參數不勾選

定位模組新建模組不訓練，模型檔案中存在多餘的test.json文件

定位模組開啟預測寬高，繪製標註修改標註框大小，切圖片標註框大小未改變

分割重點學習區域，畫重點學習區域後，多次點擊保存按鈕，每次點擊後區域面積錯誤增大，不學習區和全圖掩膜也有類似問題

非監督分割，在顯示模式下顯示標註資訊浮窗時，有概率崩潰

2）演算法修復：

修復檢測模組訓練不穩定問題

修復linux和arm版本記憶體輕微洩露問題

修復linux和arm版本可用記憶體獲取錯誤問題

## 2.4.2版本更新
### 優化：
1）軟體優化：

新增相容模式，可以實現增量剪切以及非首模組外部圖像導入，但圖像自動保留標註的功能無法在該模式下使用，需謹慎刪除圖像

## 2.4.1版本更新
### 優化：
1）軟體優化：

修復標註重複剪切去重

優化前序模組更新後續模組提示資訊

新增EVS To AIDI-遮罩工具內工廠模式

新增非監督分類得分顯示

新增批量打開專案功能

優化模型匯出功能，默認匯出已打開專案的專案模型

新增AIDI版本自動選擇工具

2）演算法優化：

新增OCR支援增量訓練，可用少量數據快速得到可上線模型

優化aidi::Image裁切全圖的速度

修改定位模組目標尺寸上限為30000

優化了推理速度，比舊版本推理速度提升30%

新增非監督分割快速版本

### 修復：
1）演算法修復：

修復分割過濾面積相差1-2個點數無法準確過濾

修復後處理長邊短邊軟體顯示的值跟後處理設定的值無法對應

修復OCR模組（批次為1）、定位模組（批次為1）時訓練效果不佳問題

C#語言開發檔案更新了LabelIO正確的使用管道

修復全圖掩模在邊緣時無檢出結果問題

修復分割&非監督分割過濾與後處理與AIDI介面長短邊結果相差1的問題

二次開發檔案更新

2）軟體修復：

修復定位模組選中某標註時無法保存標註

修復定位點擊轉換測試結果為標註後，切換圖片無提示

修復分割直線筆（線形筆與方形筆）快速鍵撤銷標註後，畫筆大小無法編輯

修復使用過濾規則，圖片使移出當前列表後，默認跳轉錯誤

修復區域選取後串聯定位模組，工廠模式結果顯示錯誤

修復定位頻繁修改標籤名稱，卡頓後軟體崩潰

優化區域選取中圖像為彩色圖時的推理速度

## 2.4.0版本更新
更新說明：本次版本進行了算法升級，算法流程升級，軟體功能升級，以及顯示優化若干。詳細升級資訊如下：

### 算法升級
1.非監督分割模組：

1）算法全面升級，不僅限週期性紋理圖片，適用於各種檢測場景。
2）週期性紋理圖片的推理速度大幅提升。
3）新增-可顯示具體缺陷得分。
4）新增-可進行全域邏輯類缺陷檢測（如印刷字元多印、缺失）。

2.OCR模組：

1）新增-字元識別工具新增了通用模型，無需標註，無需訓練。只需要導入圖像，圈出字元大小，不用訓練就可以直接得到較穩定的推理結果。進而可以直接轉化為標註，提升標註速度。


2）新增-字串模板可以設定字元最大間距，讓字串匹配不受間隔的影響。


3）新增-“:”，“-”，“_”以及自定義字元

新增默認字元“:”，“-”，“_”，並支援輸入自定義字元。

4）推理速度提升

3.分類模組：

1）新增-增量訓練
分類新增增量訓練功能，在已經得到一個模型的基礎上，添加樣本再次進行學習，能夠大幅節省訓練時間。
2）新增-訓練集推薦
得到初階模型之後，演算法可以自動挑選出需要訓練的圖片。
3）新增-模範比對 AIDI通過學習混合圖中樣板圖（OK圖）與待檢圖的差異，提高模型檢測精度，減少樣本依賴。


4.新增-非監督分類模組：支援非監督模式的圖片分類，通過學習OK樣本的共性，找到圖片級缺陷，在標註的時候只需要將OK樣本加入訓練集訓練，即可識別出全部種類缺陷樣本



5.定位模組：

1）新增-支援單點自由矩形目標檢測

2）目標轉正

6.分割

1）新增-訓練集推薦
得到初階模型之後，演算法可以自動挑選出需要訓練的圖片。


### 算法流程升級
1.新增-全模組後處理：全模組統一化後處理，可以在推理結果的基礎上進行後處理。例如可以設定目標框的大小、橫向縱向偏移。其中定位模組還可以設定目標框的相對偏移角度。

_images/liucheng01.png

2.新增-模組自動更新資料：前序模組模型更新後，後序的模組可以自動檢測到更新，而且最關鍵的是可以保留後序模組舊的資料（標註+訓練集標記+Tag+存儲名稱），無需重新標註、劃分。


3.新增-分類支援拼接模組：分類模組和非監督分類模組後面支援拼接模組。


4.新增-區域掩模：當檢測目標存在一些區域，這些區域會對模型產生不好的影響，會混淆模型對缺陷的判斷，可以將這部分不需要檢測且會造成不良影響的區域使用區域掩模將其遮蓋掉。


5.新增-區域選取ROI可以旋轉，可以出界。


### 軟體功能升級
1.標註體驗提升：

1)標註能夠批量合併類別
2)新增快速鍵Delete，可以快速刪除標註和圖片
3)新增快速鍵Esc,可以打斷標註
4)支援標註重疊框選中
5)畫筆和橡皮大小分別設定，可分段調整大小
6)所有模組-預設進入缺陷標註模式
7)統一的快速鍵提示
8)標籤長度上限擴展至30
9)設定OK圖新增快速按鈕
10)Ctrl多選優化
11)批量轉化測試結果為標註
12)模組訓練時、推理時，當前模組不允許導入、匯出、刪除圖像，訓練時不允許對訓練集資料進行更改，推理時當前模組只能取消
13)軟體支援協力廠商標註，詳見各模組介紹
14)OCR字串模板創建限制取消

2.資料管理升級：

1)模組名稱可自訂
2)圖像列表新增ID、面積、得分排序
3)圖像列表新增篩選條件：錯檢+全程無標註+重複圖片
4)新增全模組範例專案及入口
5)圖像本地名稱可以在圖像列表中顯示
6)標註分佈可新增背景
7)排隊進展在主介面顯示
8)非監督分割-缺陷得分跟隨顯示
9)介面新增軟體授權輸入入口
10)標註資訊移動到顯示模式中顯示
11)匯出模型功能改進
12)工廠模式多列顯示缺陷檢測結果
13)OCR“啟用OK/NG顯示”無效

3.模型參數：

1)訓練參數/測試參數完善釋義、名稱統一
2)訓練參數/測試參數調整更加合適的預設值
3)訓練參數/測試參數的邏輯位置重新排列
4)訓練過程曲線優化

4.交互設計優化：

1)高級參數和普通參數顏色區分
2)標註管理選中會自動展開詳細資訊
3)標註的邊線可以自訂粗細
4)多列顯示樣式大幅優化
5)功能表列佈局優化
6)頁面配置優化
7)模板管理頁面樣式及互動重新設計
8)優化混淆矩陣、模型評估頁面樣式
9)重要控制項樣式設計更明顯
10)小缺陷標記改進
11)OCR混淆矩陣預設區域級
12)OCR節點模板-可使用方向鍵切換節點
13)下拉清單樣式統一、文字按鈕樣式統一
14)Tif圖（3D）模式，色譜圖可全域調整
15)配適分辯率800*600以上點數的螢幕
16)分監督模組得分分佈圖提示

5.軟體其他升級：

1)Windows 11 系統配適
2)AIDI2.4支援EVS的調用，自動為其建立專案，添加模組
3)自動檢查本地顯卡是否符合要求
4)新增顯卡顯示工具
5)模態動畫明顯標識
6)軟體的報錯彈窗合併以及優先順序定義
7)檢測指標移出混淆矩陣，默認展開
8)工廠模式：1.新增單幀採集資料是否保留的選擇2.新增角度資訊。

### 二次開發更新
1.檔案優化：

1）層級梳理，名稱表述清晰化，與邏輯或者功能對應。
2）二次開發使用手冊更新，並補充升級部分。
3）補充協力廠商函式庫獲取安裝範例。
4）提供英文全稱或者英文描述。
5）提供C#，C++，java，Python，C檔案，綜合。
6）避免API重複。

2.介面補充優化：

1）添加高級介面。
2）單獨指定顯卡的介面。
3）面積介面。

相容性說明
AIDI2.4同時相容AIDI 2.2/2.3版本的專案。使用AIDI2.4打開舊版本專案時會自動將舊版本專案備份，並將格式轉換為新版本，轉換後大部分模組可直接使用，部分2.4新增參數點擊“重置參數”後會予以展示，以下表格描述了各模組的具體相容情況。

_images/jianrong.png

表格解讀範例：對於定位模組，2.3版本支援含定位模組的其他版本專案進行訓練、支援用已有模型進行推理、不支援定位和OCR的模板複用（導入後模板失效）。

